# TexQuery ~ LaTeX Parser

## Introduction

The rapid growth of academic research presents challenges in retrieving precise, context-aware information, particularly for large language models (LLMs) like GPT. These models struggle to effectively parse the hierarchical and cross-referential structures common in LaTeX documents. To address this limitation, we present a novel LaTeX parsing engine that integrates multiple advanced computational models to enhance document understanding.

Research papers are represented as Abstract Syntax Trees (ASTs), capturing their hierarchical structure, while Directed Acyclic Graphs (DAGs) manage non-linear relationships such as citations and cross-references. A Finite State Machine (FSM) traverses the AST and constructs an Abstract Semantic Graph (ASG), embedding the semantic meaning of each document component. These semantically enriched chunks are vectorized and processed using cosine similarity, improving the accuracy of responses generated by large language models. Initial evaluations demonstrate significant improvements in the precision of academic search results, offering a promising foundation for more advanced information retrieval systems.

This approach addresses current limitations in processing LaTeX documents, with potential applications in academic search engines and automated research tools.

## Overview

This repository contains a LaTeX document parser designed to generate structured, metadata-rich representations of LaTeX documents by leveraging the combined strengths of an **Abstract Syntax Tree (AST)**, **Directed Acyclic Graph (DAG)**, and **Finite State Machine (FSM)**. The parser efficiently processes hierarchical document structures and cross-referenced content, producing JSON output for machine learning models and document analysis.

- **AST (Abstract Syntax Tree):** Captures the hierarchical structure of LaTeX documents (e.g., sections, subsections) and organizes the content into a structured, tree-like format.
- **DAG (Directed Acyclic Graph):** Handles non-hierarchical relationships, such as cross-references and citations, ensuring efficient linking without redundancy.
- **FSM (Finite State Machine):** Manages parsing states, allowing smooth transitions between different LaTeX environments like sections, equations, and figures.
- **ASG (Abstract Semantic Graph):** Embeds semantic meaning into document components, ensuring that context is preserved and accessible.

The combined use of these components ensures robust and context-aware parsing, suitable for generating content with detailed metadata in JSON format, which is then vectorized for machine learning models.

## Export Environemnt Variables

#### OPENAI_API KEY
```bash
   export OPENAI_API_KEY=""
```

#### PINECONE_API KEY
```bash
   export PINECONE_API_KEY=""
```

## Usage
1. **Clone the repository:**

   ```bash
   git clone <repository-url>
   cd <repository-directory>
   ```
   
2. **Execution:**
   ```bash
   ./parser ../papers
   ```
3. **Run Python Script:**
   ```bash
   python search.py
   ```
4. **Query for response:**
   ```bash
    python search.py
   
    Enter your query (or type 'quit' to exit): What is this paper about?

    Enter the index name to query (or type 'all' to query all indexes): index-gi-disc-rt
   
    Refined GPT Response:
      This paper focuses on investigating the evolution of massive protoplanetary discs with irradiation from the
   central star using 3D hydrodynamics coupled with live Monte-Carlo radiative transfer. The study explores how
   different factors such as gravitational instabilities, disc cooling, and stellar irradiation influence the evolution
   of the disc. The authors emphasize the importance of the star's radiation in regulating the disc thermodynamics and
    discuss how the disc's temperature and stability are affected by these factors over time. The research findings
   highlight the role of\n stellar irradiation as the dominant energy source in the disc evolution and its impact on the
    formation of spiral\n structures and disc stability.

   


   
   ```
### Example of JSON Output
```json
{
    "document": {
        "content": [
            {
                "content": "Circle Point (Small Caps)",
                "references": [],
                "section": "Lists",
                "type": "equation"
            },
            {
                "content": "",
                "references": [],
                "section": "Equations",
                "type": "text"
            },
            {
                "content": "[Binomial Theorem]\nFor any nonnegative integer $n$, we have\n$$(1+x)^n = _i=0^n n ix^i$$\n",
                "references": [],
                "section": "Binomial Theorem",
                "type": "text"
            },
            {
                "content": "The Taylor series expansion for the function $e^x$ is given by\ne^x = 1 + x + 2+ 6+ = _n0n!",
                "references": [],
                "section": "Taylor Series",
                "type": "text"
            },
            {
                "content": "For any sets $A$, $B$ and $C$, we have\n$$ (AB)-(C-A) = A (B-C)$$\n(AB)-(C-A) &=& (AB) (C-A)^c&=& (AB) (C A^c)^c &=& (AB) (C^c A) &=& A (BC^c) &=& A (B-C)\n",
                "references": [],
                "section": "Sets",
                "type": "text"
            },
            {
                "content": "l||c|rleft justified & center & right justified 1 & 3.14159 & 5 2.4678 & 3 &  1234 3.4678 & 6.14159 & 1239\n",
                "references": [],
                "section": "Tables",
                "type": "text"
            },
            {
                "content": "(100,100)(0,0)\n1pt(20,70)(20,70)*10(80,70)(80,70)*10(40,40)(1,2)10(60,40)(-1,2)10(40,40)(1,0)20(50,20)(80,10)[b](0,90)(4,0)10(1,3)4(100,90)(-4,0)10(-1,3)4",
                "references": [],
                "section": "A Picture",
                "type": "text"
            }
        ],
        "metadata": {
            "authors": ["David P. Little"]
        },
        "title": "Sample \\LaTeX ~File"
    }
}
```
